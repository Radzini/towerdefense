<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tower Defense Game</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <canvas id="gameCanvas"></canvas>

    <!-- Game Mode Selection UI -->
    <div id="gameModeUI">
        <div class="mode-selection">
            <button id="closeMenuBtn" class="close-btn"
                style="position: absolute; top: 10px; right: 10px; display: none;">âœ•</button>
            <h1>ğŸ° Tower Defense</h1>
            <div class="selection-row">
                <label for="modeSelect">Game Mode:</label>
                <select id="modeSelect">
                    <option value="NORMAL">Normal (40 waves)</option>
                    <option value="HARDMODE">Hardmode (40 waves)</option>
                    <option value="INSANE">Insane (50 waves)</option>
                    <option value="NIGHTMARE">Nightmare (46 waves)</option>
                    <option value="BOSSRUSH">Boss Rush (5 waves)</option>
                    <option value="ENDLESS">Endless (âˆ)</option>
                </select>
            </div>
            <div class="selection-row">
                <label for="mapSelect">Map:</label>
                <select id="mapSelect">
                    <option value="STANDARD">Standard Path</option>
                    <option value="STRAIGHT">Straight Line</option>
                    <option value="INTERSECTION">Intersection</option>
                </select>
            </div>
            <button id="startGameBtn">â–¶ Start Game</button>
        </div>
    </div>

    <div id="soundModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ”Š Sound Settings</h2>
                <button class="close-modal-btn" id="closeSoundModal">âœ•</button>
            </div>
            <div class="modal-body">
                <p>Sound effects are currently unavailable in this build.</p>
            </div>
        </div>
    </div>

    <!-- Top HUD -->
    <div id="topHUD">
        <div class="hud-section">
            <div class="hud-item">
                <span class="hud-icon">ğŸ’°</span>
                <span class="hud-label">Cash:</span>
                <span id="cashDisplay" class="hud-value">250</span>
            </div>
            <div class="hud-item">
                <span class="hud-icon">ğŸŒŠ</span>
                <span class="hud-label">Wave:</span>
                <span id="waveDisplay" class="hud-value">0</span>
            </div>
            <div class="hud-item">
                <span class="hud-icon">â¤ï¸</span>
                <span class="hud-label">HP:</span>
                <span id="baseHpDisplay" class="hud-value">100</span>
            </div>
        </div>
        <div class="hud-section">
            <span id="modeDisplay" class="mode-badge"></span>
        </div>
        <div class="hud-section hud-controls">
            <button id="nextWaveBtn" class="hud-btn primary" title="Start next wave (Space)">
                <span>â–¶ Start Wave</span>
            </button>
            <button id="skipWaveBtn" class="hud-btn warning" title="Skip current wave">
                <span>â­ Skip Wave</span>
            </button>
            <button id="toggleTowerPanelBtn" class="hud-btn info" title="Toggle tower panel (T)">
                <span>ğŸ—¼ Towers</span>
            </button>
            <button id="cheatMenuBtn" class="hud-btn special" title="Open cheat menu">
                <span>ğŸ® Cheats</span>
            </button>
            <button id="menuBtn" class="hud-btn danger" title="Return to main menu">
                <span>ğŸ  Menu</span>
            </button>
        </div>
    </div>

    <!-- Tower Selection Panel -->
    <div id="towerPanel">
        <div class="panel-header">
            <h3>ğŸ—¼ Towers</h3>
            <button id="closeTowerPanelBtn" class="close-panel-btn" title="Close tower panel (Esc)">âœ•</button>
        </div>
        <div class="tower-grid">
            <div class="tower-card" id="gunnerBtn" data-hotkey="1">
                <div class="tower-icon">ğŸ”«</div>
                <div class="tower-name">Gunner</div>
                <div class="tower-cost">$150</div>
                <div class="tower-hotkey">[1]</div>
            </div>
            <div class="tower-card" id="sniperBtn" data-hotkey="2">
                <div class="tower-icon">ğŸ¯</div>
                <div class="tower-name">Sniper</div>
                <div class="tower-cost">$500</div>
                <div class="tower-hotkey">[2]</div>
            </div>
            <div class="tower-card" id="rocketerBtn" data-hotkey="3">
                <div class="tower-icon">ğŸš€</div>
                <div class="tower-name">Rocketer</div>
                <div class="tower-cost">$350</div>
                <div class="tower-hotkey">[3]</div>
            </div>
            <div class="tower-card" id="raygunnerBtn" data-hotkey="4">
                <div class="tower-icon">âš¡</div>
                <div class="tower-name">Raygunner</div>
                <div class="tower-cost">$2000</div>
                <div class="tower-hotkey">[4]</div>
            </div>
            <div class="tower-card" id="railgunnerBtn" data-hotkey="5">
                <div class="tower-icon">ğŸ”·</div>
                <div class="tower-name">Railgunner</div>
                <div class="tower-cost">$2500</div>
                <div class="tower-hotkey">[5]</div>
            </div>
            <div class="tower-card" id="summonerBtn" data-hotkey="6">
                <div class="tower-icon">ğŸ§™</div>
                <div class="tower-name">Summoner</div>
                <div class="tower-cost">$6000</div>
                <div class="tower-hotkey">[6]</div>
            </div>
            <div class="tower-card" id="farmBtn" data-hotkey="7">
                <div class="tower-icon">ğŸŒ¾</div>
                <div class="tower-name">Farm</div>
                <div class="tower-cost">$200</div>
                <div class="tower-hotkey">[7]</div>
            </div>
            <div class="tower-card" id="eliteSpawnerBtn" data-hotkey="8">
                <div class="tower-icon">â­</div>
                <div class="tower-name">Elite Spawner</div>
                <div class="tower-cost">$10000</div>
                <div class="tower-hotkey">[8]</div>
            </div>
            <div class="tower-card" id="commanderBtn" data-hotkey="9">
                <div class="tower-icon">ğŸ‘‘</div>
                <div class="tower-name">Commander</div>
                <div class="tower-cost">$1200</div>
                <div class="tower-hotkey">[9]</div>
            </div>
            <div class="tower-card" id="executiveBtn" data-hotkey="0">
                <div class="tower-icon">ğŸ’¼</div>
                <div class="tower-name">Executive</div>
                <div class="tower-cost">$3000</div>
                <div class="tower-hotkey">[0]</div>
            </div>
            <div class="tower-card" id="cubeFactoryBtn" data-hotkey="C">
                <div class="tower-icon">ğŸ­</div>
                <div class="tower-name">Cube Factory</div>
                <div class="tower-cost">$50000</div>
                <div class="tower-hotkey">[C]</div>
            </div>
            <div class="tower-card" id="chargerBtn" data-hotkey="Z">
                <div class="tower-icon">âš¡</div>
                <div class="tower-name">Charger</div>
                <div class="tower-cost">$3250</div>
                <div class="tower-hotkey">[Z]</div>
            </div>
            <div class="tower-card" id="carrierCubeBtn" data-hotkey="X">
                <div class="tower-icon">ğŸ“¦</div>
                <div class="tower-name">Carrier Cube</div>
                <div class="tower-cost">$200000</div>
                <div class="tower-hotkey">[X]</div>
            </div>
            <!-- Gunner Paragon is an upgrade, not a placeable tower -->
        </div>
    </div>

    <!-- Tower Info Panel (Persistent) -->
    <div id="towerInfoPanel">
        <div class="panel-header">
            <h3>Tower Info</h3>
            <button id="closeTowerInfo" class="close-btn">âœ•</button>
        </div>
        <div id="towerInfoContent">
            <p class="no-selection">Click on a tower to view details</p>
        </div>
        <div id="towerActions" style="display: none;">
            <button id="upgradeTowerBtn" class="upgrade-btn">â¬†ï¸ Upgrade</button>
            <button id="sellTowerBtn" class="sell-btn">ğŸ’° Sell</button>
            <button id="abilityTowerBtn" class="upgrade-btn" style="display: none;">ğŸŒˆ Ability</button>
            <button id="ability2TowerBtn" class="upgrade-btn" style="display: none;">âš¡ Ability 2</button>
        </div>
    </div>

    <!-- Carrier Cube Spawn Panel (Separate) -->
    <div id="carrierSpawnPanel" style="display: none;">
        <div class="panel-header">
            <h3>Carrier Units</h3>
        </div>
        <div id="carrierUnitsGrid"></div>
    </div>

    <!-- Cheat Menu Modal -->
    <div id="cheatModal" class="modal hidden">
        <div class="modal-content cheat-content">
            <div class="modal-header">
                <h2>ğŸ® Cheat Menu</h2>
                <button class="close-modal-btn" id="closeCheatModal">âœ•</button>
            </div>
            <div class="cheat-grid">
                <button id="addMoneyBtn" class="cheat-btn">ğŸ’° +$10,000</button>
                <button id="addLivesBtn" class="cheat-btn">â¤ï¸ +50 Lives</button>
                <button id="completeWaveBtn" class="cheat-btn">â­ Complete Wave</button>
                <button id="killAllBtn" class="cheat-btn">ğŸ’€ Kill All Enemies</button>
                <button id="maxTowersBtn" class="cheat-btn">â¬†ï¸ Max All Towers</button>
                <button id="invincibleBtn" class="cheat-btn">ğŸ›¡ï¸ Toggle Invincible</button>
                <button id="freeUpgradesBtn" class="cheat-btn">ğŸ†“ Free Upgrades</button>
                <button id="speedUpBtn" class="cheat-btn">âš¡ Speed x1</button>
                <button id="spawnDummyBtn" class="cheat-btn">ğŸ¯ Spawn Test Dummy</button>
            </div>
            <div class="cheat-input-section">
                <label>Set Wave Number:</label>
                <div class="input-group">
                    <input type="number" id="waveInput" min="1" max="100" value="1">
                    <button id="setWaveBtn" class="cheat-btn small">Set</button>
                </div>
            </div>
            <div class="cheat-input-section">
                <label>Set Money:</label>
                <div class="input-group">
                    <input type="number" id="moneyInput" min="0" step="100" value="1000">
                    <button id="setMoneyBtn" class="cheat-btn small">Set</button>
                </div>
            </div>

            <!-- Command Terminal Section -->
            <div class="terminal-section">
                <h3>ğŸ’» Command Terminal</h3>
                <div id="terminalOutput" class="terminal-output"></div>
                <div class="terminal-input-container">
                    <div id="terminalHint" class="terminal-hint"></div>
                    <input type="text" id="terminalInput" class="terminal-input"
                        placeholder="Type command... (e.g., Help)" autocomplete="off">
                </div>
            </div>
        </div>
    </div>

    <!-- Load game configuration files first -->
    <script src="enemies.js"></script>
    <!-- Load individual wave files -->
    <script src="Normal.js"></script>
    <script src="Hard.js"></script>
    <script src="Insane.js"></script>
    <script src="Extra.js"></script>
    <script src="BossRush.js"></script>
    <script src="nightmare.js"></script>
    <!-- Load wave aggregator -->
    <script src="waves.js"></script>
    <script src="carrierCube.js"></script>
    <script src="towers.js"></script>

    <!-- Load command terminal system -->
    <script src="commandTerminal.js"></script>

    <!-- Load main game script -->
    <script src="script.js"></script>
</body>

</html>